var LT;!function(a){function b(b,c,d,e,f){void 0===f&&(f=2e3),a.defaultClient.initialize(b,c,d),a.defaultClient.queueTimeoutLength=f,e&&(a.defaultClient.extendMessageBeforeSending=e)}function c(b,c,d){a.defaultClient.log(b,c,d)}function d(b,c){return a.defaultClient.defaultOnErrorExceptionHandler(b,c)}function e(b,c){return a.defaultClient.defaultAngularExceptionHandler(b,c)}a.storeServerUrl="https://store.logtank.com/";var f=function(){function b(a,b,c,d){void 0===d&&(d=2e3),this.customerKey=a,this.apiKey=b,this.defaultTags=c,this.queueTimeoutLength=d,this.xhrInitializer=null,this.usingXhr2=!1,this.logQueue=null,this.initializeHttpRequest()}return b.prototype.initialize=function(a,b,c){this.customerKey=a,this.apiKey=b,this.defaultTags=c},b.prototype.defaultOnErrorExceptionHandler=function(a,c){var d=this;return a=a||{},function(e,f,g,h,i){var j=b.clone(a);j.errorMsg=e,j.url=f,j.lineNumber=g,j.colNumber=h,j.error=b.convertErrorToSimpleObject(i),d.log(j,c,!0)}},b.prototype.defaultAngularExceptionHandler=function(a,c){var d=this;return a=a||{},function(e,f){var g=b.clone(a);g.error=b.convertErrorToSimpleObject(e),g.cause=f,d.log(g,c,!0)}},b.prototype.log=function(a,b,c){a=this.securelyExtendMessage(a),c||!this.queueTimeoutLength||this.queueTimeoutLength<=0?this.logNow(a,b):this.logLater(a,b)},b.prototype.logLater=function(a,b){var c=this;b=b||"",this.logQueue||(this.logQueue={dataPerTag:{},tags:[]},setTimeout(function(){return c.logLaterTimeout()},this.queueTimeoutLength)),this.logQueue.dataPerTag[b]||(this.logQueue.dataPerTag[b]=[],this.logQueue.tags.push(b)),this.logQueue.dataPerTag[b].push(a)},b.prototype.logLaterTimeout=function(){var a=this;this.logQueue.tags.forEach(function(b){a.logNow(a.logQueue.dataPerTag[b],b)}),this.logQueue=null},b.prototype.logNow=function(a,b){if(this.xhrInitializer){var c=this.prepareMessage(a),d=this.xhrInitializer();d.open("POST",this.getUrl(b)),this.usingXhr2?this.sendJsonData(d,c):this.sendFormData(d,c)}},b.prototype.securelyExtendMessage=function(a){if(this.extendMessageBeforeSending){var b=this.extendMessageBeforeSending(a);a=b||a}return a},b.prototype.prepareMessage=function(a){return"string"==typeof a&&(a={message:a}),JSON.stringify(a)},b.prototype.sendJsonData=function(a,b){a.setRequestHeader("Content-Type","application/json"),a.send(b)},b.prototype.sendFormData=function(a,b){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send("json="+encodeURIComponent(b))},b.prototype.initializeHttpRequest=function(){this.tryInitializeXHR(),this.xhrInitializer||this.tryInitializeActiveXHR(),this.xhrInitializer||console.log("Couldn't initialize XHR, browser not supported.")},b.prototype.getUrl=function(b){var c=a.storeServerUrl+this.customerKey+"/"+this.apiKey;return this.defaultTags&&(c=c+"/"+this.defaultTags.replace(/\./g,"/")),b&&(c=c+"/"+b.replace(/\./g,"/")),c},b.prototype.tryInitializeXHR=function(){try{var a=new XMLHttpRequest;"withCredentials"in a&&(this.usingXhr2=!0,this.xhrInitializer=function(){return new XMLHttpRequest})}catch(b){this.xhrInitializer=null,this.usingXhr2=!1}},b.prototype.tryInitializeActiveXHR=function(){try{{new window.ActiveXObject("Microsoft.XMLHTTP")}this.usingXhr2=!1,this.xhrInitializer=function(){return new window.ActiveXObject("Microsoft.XMLHTTP")}}catch(a){this.xhrInitializer=null}},b.clone=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},b.convertErrorToSimpleObject=function(a){return a?{name:a.name,message:a.message,stack:a.stack}:{}},b}();a.LogTankClient=f,a.defaultClient=new f,a.initialize=b,a.log=c,a.defaultOnErrorExceptionHandler=d,a.defaultAngularExceptionHandler=e}(LT||(LT={}));
//# sourceMappingURL=logtank.min.js.map