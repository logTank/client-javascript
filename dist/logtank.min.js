var LT;!function(a){function b(b,c,d,e){void 0===e&&(e=2e3),a.defaultClient.initialize(b,c),a.defaultClient.queueTimeoutLength=e,d&&(a.defaultClient.extendMessageBeforeSending=d)}function c(b,c,d){a.defaultClient.log(b,c,d)}function d(b,c){return a.defaultClient.defaultOnErrorExceptionHandler(b,c)}function e(b,c){return a.defaultClient.defaultAngularExceptionHandler(b,c)}var f=function(){function a(a,b,c){void 0===c&&(c=2e3),this.customerKey=a,this.apiKey=b,this.queueTimeoutLength=c,this.xhrInitializer=null,this.usingXhr2=!1,this.logQueue=null,this.initializeHttpRequest()}return a.prototype.initialize=function(a,b){this.customerKey=a,this.apiKey=b},a.prototype.defaultOnErrorExceptionHandler=function(b,c){var d=this;return b=b||{},function(e,f,g,h,i){var j=a.clone(b);j.errorMsg=e,j.url=f,j.lineNumber=g,j.colNumber=h,j.error=a.convertErrorToSimpleObject(i),d.log(j,c,!0)}},a.prototype.defaultAngularExceptionHandler=function(b,c){var d=this;return b=b||{},function(e,f){var g=a.clone(b);g.error=a.convertErrorToSimpleObject(e),g.cause=f,d.log(g,c,!0)}},a.prototype.log=function(a,b,c){a=this.securelyExtendMessage(a),c||!this.queueTimeoutLength||this.queueTimeoutLength<=0?this.logNow(a,b):this.logLater(a,b)},a.prototype.logLater=function(a,b){var c=this;b=b||"",this.logQueue||(this.logQueue={dataPerTag:{},tags:[]},setTimeout(function(){return c.logLaterTimeout()},this.queueTimeoutLength)),this.logQueue.dataPerTag[b]||(this.logQueue.dataPerTag[b]=[],this.logQueue.tags.push(b)),this.logQueue.dataPerTag[b].push(a)},a.prototype.logLaterTimeout=function(){var a=this;this.logQueue.tags.forEach(function(b){a.logNow(a.logQueue[b],b)}),this.logQueue=null},a.prototype.logNow=function(a,b){if(this.xhrInitializer){var c=this.prepareMessage(a),d=this.xhrInitializer();d.open("POST",this.getUrl(b)),this.usingXhr2?this.sendJsonData(d,c):this.sendFormData(d,c)}},a.prototype.securelyExtendMessage=function(a){if(this.extendMessageBeforeSending){var b=this.extendMessageBeforeSending(a);a=b||a}return a},a.prototype.prepareMessage=function(a){return"string"==typeof a&&(a={message:a}),JSON.stringify(a)},a.prototype.sendJsonData=function(a,b){a.setRequestHeader("Content-Type","application/json"),a.send(b)},a.prototype.sendFormData=function(a,b){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send("json="+encodeURIComponent(b))},a.prototype.initializeHttpRequest=function(){this.tryInitializeXHR(),this.xhrInitializer||this.tryInitializeActiveXHR(),this.xhrInitializer||console.log("Couldn't initialize XHR, browser not supported.")},a.prototype.getUrl=function(a){var b="http://store.logtank.com/"+this.customerKey+"/"+this.apiKey;return a&&(b=b+"/"+a.replace(/\./g,"/")),b},a.prototype.tryInitializeXHR=function(){try{var a=new XMLHttpRequest;"withCredentials"in a&&(this.usingXhr2=!0,this.xhrInitializer=function(){return new XMLHttpRequest})}catch(b){this.xhrInitializer=null,this.usingXhr2=!1}},a.prototype.tryInitializeActiveXHR=function(){try{{new window.ActiveXObject("Microsoft.XMLHTTP")}this.usingXhr2=!1,this.xhrInitializer=function(){return new window.ActiveXObject("Microsoft.XMLHTTP")}}catch(a){this.xhrInitializer=null}},a.clone=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},a.convertErrorToSimpleObject=function(a){return a?{name:a.name,message:a.message,stack:a.stack}:{}},a}();a.LogTankClient=f,a.defaultClient=new f,a.initialize=b,a.log=c,a.defaultOnErrorExceptionHandler=d,a.defaultAngularExceptionHandler=e}(LT||(LT={}));
//# sourceMappingURL=logtank.min.js.map